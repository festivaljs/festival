{"version":3,"file":"festival.js","sources":["../index.js"],"sourcesContent":["import holiday from './chn/holiday.json';\nimport legal from './chn/legal.json';\nimport swap from './chn/swap.json';\n\nconst holidayMap = new Map(Object.entries(holiday));\nconst legalMap = new Map(legal.map((date) => [date, true]));\nconst swapMap = new Map(swap.map((date) => [date, true]));\n\nclass Festival {\n  // 构造函数中初始化一些公共变量\n  constructor() {\n    // 保存日期范围的代理\n    this.proxy = new Proxy(\n      { startDate: 20070101, endDate: 20231230 },\n      {\n        get: function (target, prop) {\n          return target[prop];\n        },\n        set: function (target, prop, value) {\n          if (!Number.isNaN(Number(value))) {\n            target[prop] = Number(value);\n            return true;\n          }\n          return false;\n        },\n      }\n    );\n    this.cache = new Map();\n  }\n\n  // 判断日期是否符合要求（限制在指定日期范围内）\n  isValidDate(date) {\n    return date >= this.proxy.startDate && date <= this.proxy.endDate;\n  }\n\n  // 获取日期信息\n  getDayInfo(date) {\n    if (!this.isValidDate(date)) {\n      return 'invalid';\n    }\n    if (this.cache.has(date)) {\n      return this.cache.get(date);\n    }\n    const holiday = holidayMap.get(date) || '非假期';\n    const isLegal = legalMap.has(date);\n    const isSwap = swapMap.has(date);\n    const isHoliday = holiday !== '非假期';\n    const result = { date, name: holiday, isHoliday, isLegal, isSwap };\n    this.cache.set(date, result);\n    return result;\n  }\n\n  // 获取假期名称\n  getHolidayName(date) {\n    return holidayMap.get(date) || '非假期';\n  }\n\n  // 获取假期集合\n  getHolidaySet() {\n    return new Set(Object.keys(holiday));\n  }\n\n  // 是否为法定节假日\n  isLegalHoliday(date) {\n    return legalMap.has(date);\n  }\n\n  // 是否为调休日\n  isSwapHoliday(date) {\n    return swapMap.has(date);\n  }\n\n  // 对外暴露的方法\n  day(date) {\n    return this.getDayInfo(date);\n  }\n\n  name(date) {\n    return this.getHolidayName(date);\n  }\n\n  isHoliday(date) {\n    return this.getDayInfo(date).isHoliday;\n  }\n\n  isLegal(date) {\n    return this.isLegalHoliday(date);\n  }\n\n  isSwap(date) {\n    return this.isSwapHoliday(date);\n  }\n}\n\nexport default new Festival();\n"],"names":[],"mappings":"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"}